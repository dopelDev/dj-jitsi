{% extends 'base.html' %}

{% block title %}Inicio - Django-Jitsi{% endblock %}

{% block content %}
<!-- Hero Section -->
<section class="hero is-primary is-medium">
    <div class="hero-body">
        <div class="container">
            <div class="columns is-centered">
                <div class="column is-8">
                    <h1 class="title is-1 has-text-centered">
                        <i class="fas fa-video mr-3"></i>
                        Bienvenido a Django-Jitsi
                    </h1>
                    <h2 class="subtitle is-3 has-text-centered">
                        Sistema de gestión de reuniones con integración Jitsi
                    </h2>
                </div>
            </div>
        </div>
    </div>
</section>

<!-- Main Content -->
<section class="section">
    <div class="container">
        <div class="columns is-centered">
            <div class="column is-8">
                <div class="columns">
                    <!-- Signup Request Form -->
                    <div class="column is-6">
                        <div class="card">
                            <header class="card-header">
                                <p class="card-header-title">
                                    <i class="fas fa-user-plus mr-2"></i>
                                    Solicitar Cuenta
                                </p>
                            </header>
                            <div class="card-content">
                                <form method="post">
                                    {% csrf_token %}
                                    <div class="field">
                                        <label class="label">{{ form.email.label }}</label>
                                        <div class="control has-icons-left">
                                            {{ form.email }}
                                            <span class="icon is-small is-left">
                                                <i class="fas fa-envelope"></i>
                                            </span>
                                        </div>
                                        {% if form.email.errors %}
                                            <p class="help is-danger">{{ form.email.errors.0 }}</p>
                                        {% endif %}
                                    </div>

                                    <div class="field">
                                        <label class="label">{{ form.full_name.label }}</label>
                                        <div class="control has-icons-left">
                                            {{ form.full_name }}
                                            <span class="icon is-small is-left">
                                                <i class="fas fa-user"></i>
                                            </span>
                                        </div>
                                        {% if form.full_name.errors %}
                                            <p class="help is-danger">{{ form.full_name.errors.0 }}</p>
                                        {% endif %}
                                    </div>

                                    <div class="field">
                                        <label class="label">{{ form.password.label }}</label>
                                        <div class="control has-icons-left">
                                            {{ form.password }}
                                            <span class="icon is-small is-left">
                                                <i class="fas fa-lock"></i>
                                            </span>
                                        </div>
                                        {% if form.password.errors %}
                                            <p class="help is-danger">{{ form.password.errors.0 }}</p>
                                        {% endif %}
                                    </div>

                                    <div class="field">
                                        <label class="label">{{ form.note.label }}</label>
                                        <div class="control">
                                            {{ form.note }}
                                        </div>
                                        {% if form.note.errors %}
                                            <p class="help is-danger">{{ form.note.errors.0 }}</p>
                                        {% endif %}
                                    </div>

                                    <div class="field">
                                        <div class="control">
                                            <button type="submit" name="signup_request" class="button is-primary is-fullwidth">
                                                <i class="fas fa-paper-plane mr-2"></i>
                                                Enviar Solicitud
                                            </button>
                                        </div>
                                    </div>
                                </form>
                            </div>
                        </div>
                    </div>

                    <!-- Login Form -->
                    <div class="column is-6">
                        <div class="card">
                            <header class="card-header">
                                <p class="card-header-title">
                                    <i class="fas fa-sign-in-alt mr-2"></i>
                                    Iniciar Sesión
                                </p>
                            </header>
                            <div class="card-content">
                                <form method="post">
                                    {% csrf_token %}
                                    <div class="field">
                                        <label class="label">{{ login_form.username.label }}</label>
                                        <div class="control has-icons-left">
                                            {{ login_form.username }}
                                            <span class="icon is-small is-left">
                                                <i class="fas fa-user"></i>
                                            </span>
                                        </div>
                                        {% if login_form.username.errors %}
                                            <p class="help is-danger">{{ login_form.username.errors.0 }}</p>
                                        {% endif %}
                                    </div>

                                    <div class="field">
                                        <label class="label">{{ login_form.password.label }}</label>
                                        <div class="control has-icons-left">
                                            {{ login_form.password }}
                                            <span class="icon is-small is-left">
                                                <i class="fas fa-lock"></i>
                                            </span>
                                        </div>
                                        {% if login_form.password.errors %}
                                            <p class="help is-danger">{{ login_form.password.errors.0 }}</p>
                                        {% endif %}
                                    </div>

                                    {% if login_form.non_field_errors %}
                                        <div class="notification is-danger is-light">
                                            {{ login_form.non_field_errors.0 }}
                                        </div>
                                    {% endif %}

                                    <div class="field">
                                        <div class="control">
                                            <button type="submit" name="login" class="button is-success is-fullwidth">
                                                <i class="fas fa-sign-in-alt mr-2"></i>
                                                Iniciar Sesión
                                            </button>
                                        </div>
                                    </div>
                                </form>

                                <hr>
                                <div class="has-text-centered">
                                    <p class="has-text-grey">
                                        ¿Eres administrador? 
                                        <a href="/admin/" class="has-text-link">
                                            <i class="fas fa-cog mr-1"></i>
                                            Panel de Administración
                                        </a>
                                    </p>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>
</section>
{% endblock %}

{% block extra_js %}
<script>
    // Add Bulma classes to form fields
    document.addEventListener('DOMContentLoaded', function() {
        // Add classes to signup form fields
        const signupFields = document.querySelectorAll('input[name="email"], input[name="full_name"], input[name="password"], textarea[name="note"]');
        signupFields.forEach(field => {
            field.classList.add('input');
        });
        
        // Add classes to login form fields
        const loginFields = document.querySelectorAll('input[name="username"], input[name="password"]');
        loginFields.forEach(field => {
            field.classList.add('input');
        });
    });
</script>
{% endblock %}