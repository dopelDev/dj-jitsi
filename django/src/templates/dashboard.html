{% extends 'base.html' %}

{% block title %}Dashboard - Django-Jitsi{% endblock %}

{% block content %}
<!-- Hero Section -->
<section class="hero is-info is-medium">
    <div class="hero-body">
        <div class="container">
            <div class="columns is-centered">
                <div class="column is-8">
                    <h1 class="title is-1 has-text-centered">
                        <i class="fas fa-tachometer-alt mr-3"></i>
                        Dashboard
                    </h1>
                    <h2 class="subtitle is-4 has-text-centered">
                        Rol: <span class="tag is-light is-large">{{ role }}</span>
                    </h2>
                </div>
            </div>
        </div>
    </div>
</section>

<!-- Main Content -->
<section class="section">
    <div class="container">
        <div class="columns is-centered">
            <div class="column is-8">
                <!-- Action Cards -->
                <div class="columns">
                    {% if role == "USER" or role == "WEB_ADMIN" or role == "ENV_ADMIN" %}
                    <div class="column is-6">
                        <div class="card">
                            <div class="card-content has-text-centered">
                                <div class="icon is-large has-text-primary mb-4">
                                    <i class="fas fa-plus-circle fa-3x"></i>
                                </div>
                                <h3 class="title is-4">Crear Meeting</h3>
                                <p class="subtitle is-6">Crea una nueva reunión Jitsi</p>
                                <a href="{% url 'create_meeting' %}" class="button is-primary is-large">
                                    <i class="fas fa-plus mr-2"></i>
                                    Crear Meeting
                                </a>
                            </div>
                        </div>
                    </div>
                    {% endif %}

                    {% if role == "ENV_ADMIN" or role == "WEB_ADMIN" %}
                    <div class="column is-6">
                        <div class="card">
                            <div class="card-content has-text-centered">
                                <div class="icon is-large has-text-success mb-4">
                                    <i class="fas fa-users-cog fa-3x"></i>
                                </div>
                                <h3 class="title is-4">Administrar Solicitudes</h3>
                                <p class="subtitle is-6">Revisar y aprobar solicitudes de usuarios</p>
                                <a href="{% url 'admin_requests' %}" class="button is-success is-large">
                                    <i class="fas fa-clipboard-list mr-2"></i>
                                    Ver Solicitudes
                                </a>
                            </div>
                        </div>
                    </div>
                    {% endif %}
                </div>

                <!-- Recent Meetings -->
                <div class="card">
                    <header class="card-header">
                        <p class="card-header-title">
                            <i class="fas fa-history mr-2"></i>
                            Mis Reuniones Recientes
                        </p>
                    </header>
                    <div class="card-content">
                        {% if meetings %}
                            <div class="table-container">
                                <table class="table is-fullwidth is-hoverable">
                                    <thead>
                                        <tr>
                                            <th><i class="fas fa-video mr-1"></i> Sala</th>
                                            <th><i class="fas fa-calendar mr-1"></i> Creado</th>
                                            <th><i class="fas fa-link mr-1"></i> Acciones</th>
                                        </tr>
                                    </thead>
                                    <tbody>
                                        {% for meeting in meetings %}
                                        <tr>
                                            <td>
                                                <strong>{{ meeting.room }}</strong>
                                            </td>
                                            <td>
                                                <span class="tag is-light">
                                                    {{ meeting.created_at|date:"d/m/Y H:i" }}
                                                </span>
                                            </td>
                                            <td>
                                                <a href="{% url 'meeting_detail' meeting.pk %}" class="button is-small is-info">
                                                    <i class="fas fa-eye mr-1"></i>
                                                    Ver Detalles
                                                </a>
                                            </td>
                                        </tr>
                                        {% endfor %}
                                    </tbody>
                                </table>
                            </div>
                        {% else %}
                            <div class="has-text-centered py-6">
                                <div class="icon is-large has-text-grey-light mb-4">
                                    <i class="fas fa-video fa-3x"></i>
                                </div>
                                <h3 class="title is-4 has-text-grey">No tienes reuniones aún</h3>
                                <p class="subtitle is-6 has-text-grey">Crea tu primera reunión para comenzar</p>
                                {% if role == "USER" or role == "WEB_ADMIN" or role == "ENV_ADMIN" %}
                                <a href="{% url 'create_meeting' %}" class="button is-primary">
                                    <i class="fas fa-plus mr-2"></i>
                                    Crear Primera Reunión
                                </a>
                                {% endif %}
                            </div>
                        {% endif %}
                    </div>
                </div>

                <!-- Role Information -->
                <div class="card">
                    <header class="card-header">
                        <p class="card-header-title">
                            <i class="fas fa-info-circle mr-2"></i>
                            Información de Rol
                        </p>
                    </header>
                    <div class="card-content">
                        <div class="content">
                            {% if role == "ENV_ADMIN" %}
                                <div class="notification is-primary is-light">
                                    <h4 class="title is-5"><i class="fas fa-crown mr-2"></i>Administrador del Sistema</h4>
                                    <p>Tienes acceso completo al sistema, incluyendo:</p>
                                    <ul>
                                        <li>Crear y gestionar reuniones</li>
                                        <li>Aprobar y rechazar solicitudes de usuarios</li>
                                        <li>Acceso completo al panel de administración</li>
                                    </ul>
                                </div>
                            {% elif role == "WEB_ADMIN" %}
                                <div class="notification is-success is-light">
                                    <h4 class="title is-5"><i class="fas fa-user-shield mr-2"></i>Administrador Web</h4>
                                    <p>Tienes permisos administrativos, incluyendo:</p>
                                    <ul>
                                        <li>Crear y gestionar reuniones</li>
                                        <li>Aprobar y rechazar solicitudes de usuarios</li>
                                        <li>Acceso al panel de administración</li>
                                    </ul>
                                </div>
                            {% elif role == "USER" %}
                                <div class="notification is-info is-light">
                                    <h4 class="title is-5"><i class="fas fa-user mr-2"></i>Usuario Registrado</h4>
                                    <p>Puedes:</p>
                                    <ul>
                                        <li>Crear y gestionar tus propias reuniones</li>
                                        <li>Unirte a reuniones mediante enlaces</li>
                                    </ul>
                                </div>
                            {% else %}
                                <div class="notification is-warning is-light">
                                    <h4 class="title is-5"><i class="fas fa-user-circle mr-2"></i>Invitado</h4>
                                    <p>Como invitado, puedes:</p>
                                    <ul>
                                        <li>Unirte a reuniones mediante enlaces</li>
                                        <li>No puedes crear nuevas reuniones</li>
                                    </ul>
                                </div>
                            {% endif %}
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>
</section>
{% endblock %}